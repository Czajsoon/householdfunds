<div class="container">
  <div class="row justify-content-center">
    <div class="col text-center recipeHeader">
      <h3>Paragon z dnia:  {{recipe.dateTime | date:"MMM d, y, H:mm"}}</h3>
    </div>
  </div>
  <div class="row justify-content-center text-center">
    <div class="col">
      <div class="row justify-content-center text-center recipeElement">
        <h5>Data zakupu:</h5>
      </div>
      <div class="row justify-content-center text-center recipeElement">
        <h5>Rodzaj płatności:</h5>
      </div>
      <div class="row justify-content-center text-center recipeElement">
        <h5>Suma w PLN:</h5>
      </div>
    </div>
    <div class="col">
      <div class="row justify-content-center text-center recipeInput">
        <p-calendar placeholder="Data zakupów" dateFormat="dd MM yy" [showTime]="true" [(ngModel)]="recipe.dateTime"
                    [showSeconds]="false" inputId="time" styleClass="w-100" inputStyleClass="text-center"></p-calendar>
      </div>
      <div class="row justify-content-center text-center recipeInput">
        <p-dropdown [options]="paymentMethod" placeholder="Wybierz metodę płatności" optionLabel="name"
                    [(ngModel)]="recipe.payment"
                    [showClear]="true" styleClass="w-100 text-center"></p-dropdown>
      </div>
      <div class="row p-element p-inputwrapper w-90 justify-content-center text-center recipeInput">
        <p-inputNumber placeholder="Suma w PLN" inputId="currency-pl" mode="currency" currency="PLN" locale="pl-PL"
                       [(ngModel)]="recipe.totalPrice"
                       styleClass="w-100" inputStyleClass="text-center"></p-inputNumber>
      </div>
    </div>
  </div>
  <div class="row recipeHeader">
    <h4 class="text-center">Zakupione produkty</h4>
    <div *ngIf="recipe.items.length !== 0">

      <div *ngFor="let item of recipe.items; let i = index">
        {{i + 1}})
        <div class="row">
          <div class="col">
            <div class="p-inputgroup recipeProduct">
          <span class="p-float-label">
            <p-inputNumber [(ngModel)]="item.quantity" id="quantity"
                           (onInput)="modelChangeFn($event.value,i,'quantity')" inputId="mile"
                           suffix=" szt."></p-inputNumber>
              <label for="quantity">Ilość w sztukach</label>
          </span>
            </div>
            <div class="p-inputgroup recipeProduct">
          <span class="p-float-label">
              <input id="name" pInputText value="{{item.product.name}}">
              <label for="name">Nazwa produktu</label>
          </span>
            </div>
          </div>
          <div class="col">
            <div class="p-inputgroup recipeProduct">
          <span class="p-float-label w-100">
              <p-inputNumber [(ngModel)]="item.product.price" id="price"
                             (onInput)="modelChangeFn($event.value,i,'price')" inputId="currency-pl" mode="currency"
                             currency="PLN" locale="pl-PL" styleClass="w-100"></p-inputNumber>
              <label for="price">Cena za sztukę</label>
          </span>
            </div>
            <div class="p-inputgroup recipeProduct">
          <span class="p-float-label">
              <p-inputNumber id="sum" [(ngModel)]="sums[i].sum" [readonly]="true" inputId="currency-pl" mode="currency"
                             currency="PLN" locale="pl-PL" styleClass="w-100"></p-inputNumber>
              <label for="sum">Suma w PLN</label>
          </span>
            </div>
          </div>
          <div class="col-sm-1">
            <div class="w-100 justify-content-center text-center">
              <button pButton pRipple type="button" (click)="deleteProduct(i)" icon="pi pi-trash"
                      class="p-button-rounded p-button-danger ActionButtonBottom"></button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div *ngIf="recipe.items.length === 0">
      <div class="justify-content-center text-center">
        <h3>Na liście nie ma żadnych produktów! :(</h3>
      </div>
    </div>
    <div class="justify-content-center text-center AddProduct">
      <button pButton pRipple type="button" (click)="addProduct()" icon="pi pi-plus"
              class="p-button-info w-50"></button>
    </div>
    <div class="justify-content-center text-center AddProduct">
      <button pButton pRipple type="button" icon="pi pi-check" (click)="save(recipe.dateTime.toDateString())"
              label="Zapisz"
              class="p-button-info w-50"></button>
    </div>
  </div>
</div>
<p-toast></p-toast>
